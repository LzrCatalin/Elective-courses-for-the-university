<app-toolbar></app-toolbar>
<div [ngClass]="{ 'read-only': readOnly }">
	<div class="main-container">
		<p-table
			class="main-table"
			[value]="applications"
			[scrollable]="true"
			scrollHeight="400px"
			[paginator]="true"
			[rows]="5"
			[rowsPerPageOptions]="[5, 10, 20]">
			<ng-template pTemplate="header">
				<tr>
					<th pSortableColumn="courseName">Course Name</th>
					<th pSortableColumn="priority">Priority</th>
					<th pSortableColumn="status">Status</th>
					<th>Action</th>
				</tr>
			</ng-template>

			<ng-template pTemplate="body" let-application>
				<tr>
					<td>
						{{ application.course.name }}
					</td>
					<td>
						{{ application.priority }}
					</td>
					<td>
						{{ application.status }}
					</td>
					<td>
						<button class="btn-edit" (click)="toggleEditFormVisibility(application)" [disabled]="readOnly"></button>
						<button class="btn-delete" (click)="deleteApplication(application.id)" [disabled]="readOnly"></button>
					</td>
				</tr>
			</ng-template>
		</p-table>
	</div>
</div>

<div *ngIf="studentId && !readOnly" class="btn-add-container">
	<button class="btn-add" (click)="toggleFormVisibility()">Add Application</button>
</div>

<div *ngIf="showForm && !readOnly" class="add-form-container">
	<form (submit)="onFormSubmit()" class="add-form">
		<label for="courseName">Course Name: </label>
		<input type="text" id="courseName" name="courseName" [(ngModel)]="courseName" required><br>

		<label for="priority">Priority: </label>
		<input class="input-priority" type="number" id="priority" name="priority" [(ngModel)]="priority" required><br>

		<button class="btn-submit" type="submit">Submit</button>
	</form>
</div>

<div *ngIf="showEditForm && !readOnly" class="edit-form-container">
	<form (submit)="onEditFormSubmit()" class="edit-form">
		<label for="editPriority">Edit Priority: </label>
		<input type="number" id="editPriority" name="editPriority" [(ngModel)]="editedPriority" required><br>

		<button type="submit" class="btn-save">Save</button>
		<button class="btn-cancel" type="button" (click)="cancelEdit()">Cancel</button>
	</form>
</div>
